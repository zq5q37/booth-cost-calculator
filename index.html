<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

    <title>Miyu Shop POS</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="vertical-split">
      <div class="catalogue-left">
        <div class="tab-bar">
          <button class="tab-btn" data-tab="front">ZZZ</button>
          <button class="tab-btn" data-tab="back">BA</button>
          <button class="tab-btn" data-tab="insideLeft">Genshin/HSR</button>
          <button class="tab-btn" data-tab="insideRight">Misc</button>
          <button class="tab-btn" data-tab="zzzkeychains">ZZZ KeyC</button>
          <button class="tab-btn" data-tab="bakeychains">BA KeyC</button>
          <button class="tab-btn" data-tab="hsrkeychains">HSR KeyC</button>
          <button class="tab-btn" data-tab="stands">Stands</button>
          <button class="tab-btn" data-tab="stickers">Stickers</button>
        </div>

        <!-- Tab content -->
        <div id="tab-content"></div>
      </div>

      <div class="shopping-cart-right">
        <h2>Shopping Cart</h2>
        <div id="cart"></div>
        <div class="total" id="cart-total">Total: $0</div>
        <audio id="save-sound" src="sounds\zzz_watainata.mp3" preload="auto"></audio>
        <button
          id="save"
          class="reset-button"
          style="background-color: rgb(61, 171, 174)"
        >
          Save Order
        </button>
        <button
          id="reset"
          class="reset-button"
          style="background-color: rgb(191, 90, 90)"
        >
          Reset
        </button>

        <div id="cash-payment">
          <!-- Display Row -->
          <div
            style="
              display: grid;
              grid-template-columns: 1fr auto 1fr auto 1fr;
              gap: 5px;
              text-align: center;
            "
          >
            <!-- Labels -->
            <div>Given</div>
            <div></div>
            <div>Total</div>
            <div></div>
            <div>Change</div>

            <!-- Values -->
            <div id="cashGivenBox" style="border: 1px solid #ccc; padding: 6px">
              $0
            </div>
            <div>-</div>
            <div id="totalBox" style="border: 1px solid #ccc; padding: 6px">
              $0
            </div>
            <div>=</div>
            <div id="changeBox" style="border: 1px solid #ccc; padding: 6px">
              $0
            </div>
          </div>

          <!-- Buttons -->
          <div id="cash-buttons">
            <button onclick="setCash(50)">50</button>
            <button onclick="setCash(40)">40</button>
            <button onclick="setCash(30)">30</button>
            <button onclick="setCash(20)">20</button>
            <input
              type="number"
              id="customCash"
              placeholder="Custom"
              oninput="setCash(this.value)"
              style="width: 80px; margin-top: 8px"
            />
          </div>
        </div>

        <div id="order-list" style="padding-top: 5px; width: 90%">
          Previous Orders
        </div>
        <button
          id="download"
          class="reset-button"
          style="background-color: rgb(82, 136, 113)"
        >
          Download Orders
        </button>
        <button
          id="clear-orders"
          class="reset-button"
          style="background-color: rgb(178, 51, 51)"
        >
          Clear Orders
        </button>
      </div>
    </div>

    <script type="module" src="web.js"></script>
    <script>
      let cashGiven = 0;
      let totalCost = 0;

      function setCash(amount) {
        cashGiven = parseFloat(amount) || 0;
        document.getElementById("cashGivenBox").textContent = "$" + cashGiven;
        updateChange();
      }

      function updateTotal(newTotal) {
        totalCost = newTotal;
        document.getElementById("totalBox").textContent = "$" + totalCost;
        updateChange();
      }

      function updateChange() {
        const change = cashGiven - totalCost;
        const changeBox = document.getElementById("changeBox");

        changeBox.textContent = "$" + change;
        if (change < 0) {
          changeBox.style.backgroundColor = "red";
        } else if (change > 0) {
          changeBox.style.backgroundColor = "#00ff00";
        } else {
          changeBox.style.backgroundColor = "yellow";
        }
      }

      // expose so other scripts can call it
      window.updateCashTotal = updateTotal;
      window.setCashGiven = setCash;
    </script>
  </body>
</html>
